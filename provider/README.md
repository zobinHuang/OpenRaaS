# winecontainer 服务模块

## 介绍

用于 linux/macOS 平台部署 Windows APP 的 docker 模块，可以作为分布式云游戏的渲染核心对后台服务提供接口与流式服务

## 软件架构

包含 `serverd` 与 `winetools` 两个部分。
`serverd` 是部署在渲染服务器上用于维护 wine 容器的 go 后台，负责接收调度器的命令并执行对应操作
`winetools` 是整理好的 wine 容器工具，包括构建、运行、配置等基础功能，以及容器内部的推流环境，并提供了网络设置工具

## 安装教程

详见两个目录下的 markdown 文件

## 使用说明

1. 按照 `winetools` 的说明构建镜像
2. 启动 `serverd` 后台
3. 根据 `serverd` 接口文档说明，实现对渲染服务器的控制
4. 根据 `winetools` 接口文档说明，建立 web 后台与具体容器之间的连接，以实现云应用的中转功能

需要注意的是，一台渲染服务器对应了一个 `serverd` 后台，只需要用宿主机的 ip 就能与后台通信。然而，一个渲染节点上有多个 wine 容器，各 wine 容器都是不同的内网 IP 地址（以宿主机为网关）。我们假设实现 RTC 中转的 web 后台也在宿主机上（不关心具体是 docker 还是直接部署），此时 web 后台需要获知哪个用户对应哪个容器，并与对应容器的内网 IP 建立连接

## 接口文档

网络接口分为两部分：

`serverd` 的接口实体在宿主机上，只用访问渲染服务器即可

`winetools` 的接口实体在具体的容器上，需要访问容器的内网 IP

对应的文档相见各自目录的 markdown 文件

## 常见问题

## ToDo
